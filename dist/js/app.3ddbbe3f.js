(function(e){function t(t){for(var n,a,c=t[0],o=t[1],u=t[2],l=0,f=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var o=r[a];0!==s[o]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},s={app:0},i=[];function a(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"d959d331"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r=s[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=s[e]=[t,n]}));t.push(r[2]=n);var i,o=document.createElement("script");o.charset="utf-8",o.timeout=120,c.nc&&o.setAttribute("nonce",c.nc),o.src=a(e);var u=new Error;i=function(t){o.onerror=o.onload=null,clearTimeout(l);var r=s[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",u.name="ChunkLoadError",u.type=n,u.request=i,r[1](u)}s[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:o})}),12e4);o.onerror=o.onload=i,document.head.appendChild(o)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=r("bc3a"),i=r.n(s),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"app"}},[r("v-system-bar",{attrs:{id:"nav"}},[r("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" | "),r("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),r("v-main",[r("v-container",{attrs:{fluid:""}},[r("router-view")],1)],1),r("v-footer",{attrs:{app:""}})],1)},c=[],o=r("2877"),u={},l=Object(o["a"])(u,a,c,!1,null,"3dd603da",null),d=l.exports,f=(r("d3b7"),r("8c4f")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[e.currentUser?e.currentProgram?r("Training"):r("ProgramSelect"):r("UserSelect")],1)},v=[],h=r("5530"),m=r("2f62"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-row",[r("v-col",[r("h4",[e._v("Выберите программу")])])],1),e._l(e.programs,(function(t,n){return r("v-row",{key:t.id},[r("v-col",[r("v-btn",{on:{click:function(t){return e.setCurrentProgram(n)}}},[e._v(" "+e._s(t.name)+" ")])],1)],1)}))],2)},x=[],b={name:"ProgramSelect",computed:Object(h["a"])(Object(h["a"])({},Object(m["c"])("programs",{programs:function(e){return e.programs}})),Object(m["c"])("users",{currentUser:function(e){return e.currentUser}})),methods:Object(h["a"])({},Object(m["b"])("programs",["loadPrograms","setCurrentProgram"])),created:function(){this.loadPrograms(this.currentUser.id)}},_=b,y=Object(o["a"])(_,g,x,!1,null,"ce0a584a",null),w=y.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("audio",{ref:"timer",attrs:{preload:"auto",src:r("86f2")}}),n("audio",{ref:"finish",attrs:{preload:"auto",src:r("fe42")}}),e.showAlert?n("v-row",{staticClass:"d-flex justify-center"},[n("v-alert",{attrs:{dismissible:"",color:"success",border:"left",elevation:"2","colored-border":"",transition:"scale-transition",icon:"mdi-flag-checkered"},model:{value:e.showAlert,callback:function(t){e.showAlert=t},expression:"showAlert"}},[e._v(" Тренировка завершена за "),n("strong",[e._v(e._s(e.trainingDuration))]),e._v(" минут! ")])],1):e._e(),e.startTraining?n("v-row",{staticClass:"d-flex justify-center"},[n("v-col",{attrs:{cols:"auto","align-self":"center"}},[n("v-card",{attrs:{elevation:"2"}},[n("v-card-title",[e._v(" Тренировка начата в "+e._s(e.trainingStartDisplay)+" ")]),n("v-card-title",[e._v(" Текущее упражнение ")]),n("v-card-text",[n("b",[e._v("Номер:")]),e._v(" "+e._s(e.currentExercise.displayIndex)+" из "+e._s(e.exercises.length)+" "),n("v-spacer"),n("b",[e._v("Название:")]),e._v(" "+e._s(e.currentExercise.name)+" "),n("v-spacer"),n("b",[e._v("Инвентарь:")]),e._v(" "+e._s(e.currentExercise.displayInventory)+" "),n("v-spacer"),n("b",[e._v("Вес (кг):")]),e._v(" "+e._s(e.currentExercise.weight)+" "),n("v-spacer"),n("b",[e._v("Подход:")]),e._v(" "+e._s(e.currentApproach)+" из "+e._s(e.currentExercise.approaches)+" "),n("v-spacer"),n("b",[e._v("Повторений:")]),e._v(" "+e._s(e.currentExercise.repeats)+" "),n("v-spacer")],1),n("v-card-actions",{staticClass:"d-flex justify-center"},[n("v-btn",{attrs:{elevation:"2",color:e.restLeft?"error":"success",fab:"",width:"100px",height:"100px"},on:{click:e.onRestClick}},[e.restLeft?n("span",{staticClass:"text-h4"},[e._v(e._s(e.restLeft))]):n("v-icon",{attrs:{dark:"","x-large":""}},[e._v(" mdi-timer ")])],1)],1)],1)],1)],1):n("v-row",{staticClass:"start d-flex justify-center py-2"},[n("v-btn",{on:{click:e.onStartTraining}},[n("v-icon",{staticClass:"pr-1"},[e._v("mdi-dumbbell")]),e._v(" Начать тренировку ")],1)],1),n("v-row",[n("v-col",[n("v-card",{staticClass:"d-flex justify-center"},[n("v-card-title",[e._v(" Программа тренировки ")])],1)],1)],1),n("v-row",[n("v-col",[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.exercisesList,"hide-default-footer":"",dense:"","disable-filtering":"","disable-pagination":"","disable-sort":"","item-class":e.getItemClass,"mobile-breakpoint":"0"}})],1)],1)],1)},E=[],O=(r("d81d"),{name:"Training",data:function(){return{showAlert:!1,audio:void 0,startTraining:!1,exerciseStart:void 0,training:void 0,currentExerciseIndex:0,currentApproach:1,restLeft:0,inventoryMap:{0:"Ничего",1:"Штанга",2:"Гантели",3:"Гиря"},headers:[{text:"№",align:"center",value:"displayIndex"},{text:"Название",align:"start",value:"name"},{text:"Инвертарь",align:"center",value:"displayInventory"},{text:"Вес (кг)",align:"center",value:"displayWeight"},{text:"Подходов",align:"center",value:"approaches"},{text:"Повторений",align:"center",value:"repeats"}]}},computed:Object(h["a"])(Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(m["c"])("programs",{currentProgram:function(e){return e.currentProgram}})),Object(m["c"])("training",{exercises:function(e){return e.exercises}})),Object(m["c"])("users",{currentUser:function(e){return e.currentUser}})),{},{exercisesList:function(){var e=this;return this.exercises.map((function(t,r){return t.displayIndex=++r,t.displayInventory=e.inventoryMap[t.inventory],t.displayWeight="0.00"!=t.weight?t.weight:"-",t}))},currentExercise:function(){return this.exercisesList[this.currentExerciseIndex]},trainingStartDisplay:function(){return this.training?new Date(this.training.start).toLocaleTimeString():""},trainingDuration:function(){if(this.training){var e=new Date(this.training.start),t=new Date(this.training.end);return parseInt((t-e)/1e3/60)}return 0}}),methods:Object(h["a"])(Object(h["a"])({},Object(m["b"])("training",["loadExercises","setCurrentExercise"])),{},{onStartTraining:function(){var e=this;i.a.post("training-history/start/",{program:this.currentProgram.id}).then((function(t){e.training=t.data,e.startTraining=!0,e.exerciseStart=new Date}))},endTraining:function(){var e=this;i.a.post("training-history/".concat(this.training.id,"/end/")).then((function(t){e.training=t.data,e.startTraining=!1,e.showAlert=!0,e.$refs.finish.play()}))},getItemClass:function(e){return null===this.currentExerciseIndex||this.currentExerciseIndex>e.displayIndex-1?"success":this.currentExerciseIndex<e.displayIndex-1?"warning":this.currentExerciseIndex===e.displayIndex-1?"info":void 0},onRestClick:function(){var e=this;if(!this.restLeft){if(this.saveExerciseDone(),this.currentApproach++,this.currentApproach>this.currentExercise.approaches){if(this.currentApproach=1,this.restLeft=this.currentProgram.rest_between_exercises,this.currentExerciseIndex+1==this.exercises.length)return void this.endTraining();this.currentExerciseIndex++,this.setCurrentExercise(this.currentExerciseIndex)}else this.restLeft=this.currentProgram.rest_between_repeats;var t=setInterval((function(){--e.restLeft||(clearInterval(t),e.$refs.timer.play(),e.exerciseStart=new Date)}),1e3)}},saveExerciseDone:function(){var e={training_history:this.training.id,exercise:this.currentExercise.id,repeat:this.currentApproach,duration_seconds:parseInt((new Date-this.exerciseStart)/1e3)};i.a.post("exercise-done/",e)}}),watch:{showAlert:function(e){e||(this.$refs.finish.pause(),this.$refs.finish.currentTime=0)}},created:function(){this.loadExercises(this.currentProgram.id)}}),P=O,C=Object(o["a"])(P,j,E,!1,null,null,null),I=C.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-row",[r("v-col",[r("h4",[e._v("Выберите пользователя")])])],1),r("v-row",[r("v-col",e._l(e.users,(function(t,n){return r("v-btn",{key:t.id,on:{click:function(t){return e.setCurrentUser(n)}}},[e._v(" "+e._s(t.username)+" ")])})),1)],1)],1)},S=[],k={name:"UserSelect",computed:Object(h["a"])({},Object(m["c"])("users",{users:function(e){return e.users}})),methods:Object(h["a"])({},Object(m["b"])("users",["loadUsers","setCurrentUser"])),created:function(){this.loadUsers()}},T=k,A=Object(o["a"])(T,U,S,!1,null,"bf7c54e2",null),L=A.exports,D={name:"Home",components:{ProgramSelect:w,Training:I,UserSelect:L},computed:Object(h["a"])(Object(h["a"])({},Object(m["c"])("users",{currentUser:function(e){return e.currentUser}})),Object(m["c"])("programs",{currentProgram:function(e){return e.currentProgram}})),methods:{}},$=D,M=Object(o["a"])($,p,v,!1,null,null,null),H=M.exports;n["default"].use(f["a"]);var R=[{path:"/",name:"Home",component:H},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],J=new f["a"]({mode:"history",base:"/",routes:R}),W=J,q={namespaced:!0,state:{programs:[],currentProgram:void 0},mutations:{_setPrograms:function(e,t){e.programs=t},_setCurrentProgram:function(e,t){e.currentProgram=e.programs[t]}},actions:{loadPrograms:function(e,t){i.a.get("programs/?user_id=".concat(t)).then((function(t){e.commit("_setPrograms",t.data)}))},setCurrentProgram:function(e,t){e.commit("_setCurrentProgram",t)}}},z={namespaced:!0,state:{exercises:[],currentExercise:void 0},mutations:{_setExercises:function(e,t){e.exercises=t},_setCurrentExercise:function(e,t){e.currentExercise=e.exercises[t]}},actions:{loadExercises:function(e,t){i.a.get("exercises/?program_id=".concat(t)).then((function(t){e.commit("_setExercises",t.data)}))},setCurrentExercise:function(e,t){e.commit("_setCurrentExercise",t)}}},B={namespaced:!0,state:{users:[],currentUser:void 0},mutations:{_setUsers:function(e,t){e.users=t},_setCurrentUser:function(e,t){e.currentUser=e.users[t]}},actions:{loadUsers:function(e){i.a.get("users/").then((function(t){e.commit("_setUsers",t.data)}))},setCurrentUser:function(e,t){e.commit("_setCurrentUser",t)}}};n["default"].use(m["a"]);var F=new m["a"].Store({state:{},mutations:{},actions:{},modules:{programs:q,training:z,users:B},strict:!1}),G=r("ce5b"),K=r.n(G);r("bf40");n["default"].use(K.a);var N={},Q=new K.a(N);i.a.defaults.baseURL="".concat("http://192.168.1.50:8888","/api/v1/"),n["default"].config.productionTip=!1,new n["default"]({router:W,store:F,vuetify:Q,render:function(e){return e(d)}}).$mount("#app")},"86f2":function(e,t,r){e.exports=r.p+"media/timer_end.152192f9.mp3"},fe42:function(e,t,r){e.exports=r.p+"media/finish_audio.82976df6.mp3"}});
//# sourceMappingURL=app.3ddbbe3f.js.map